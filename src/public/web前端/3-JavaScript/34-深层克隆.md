## 深层克隆

**递归方式进行深层克隆:**

1.通过 `typeof` 判断类型是不是 `object` 且排除 `null` , 如果不是则直接进行复制

此处 function 也将被复制一层函数引用 , 如果是则进入下一层判断

2.判断是数组还是对象 , 通过 `Object.prototype.toString` 方法

 是对象或数组, 建立相对应的对象或数组结构



*可以直接进行拷贝的数据*

原始值 + function



*需进行深拷贝的数据*

数组 + 对象



**示例:**

```js
/**
 * origin 克隆到谁身上
 * target 被克隆的对象
*/
var deepClone = function (origin, target) {
    let toStr = Object.prototype.toString;
    for (var prop in target) {
        if (target.hasOwnProperty(prop)) {
            if (target[prop] !== null && typeof (target[prop]) === 'object') {
                if (toStr.call(target[prop]) === '[object Array]') {
                    origin[prop] = [];
                } else {
                    origin[prop] = {};
                }
                deepClone(origin[prop], target[prop]);
            } else {
                origin[prop] = target[prop];
            }
        }
    }
}

// 测试
var obj = {
    childObj: null,
    name: 'hehe',
    age: 19,
    arr: [{ test: 0 }, 'a']
}
var newObj = {}
deepClone(newObj, obj);
console.log(newObj);
```

